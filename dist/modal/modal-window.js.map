{"version":3,"sources":["../../src/modal/modal-window.ts"],"names":[],"mappings":"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","file":"modal-window.js","sourceRoot":"","sourcesContent":["import {\r\n  Component,\r\n  Output,\r\n  EventEmitter,\r\n  Input,\r\n  ElementRef,\r\n  Renderer2,\r\n  OnInit,\r\n  AfterViewInit,\r\n  OnDestroy\r\n} from '@angular/core';\r\n\r\nimport {ModalDismissReasons} from './modal-dismiss-reasons';\r\n\r\n\r\nexport class NgbModalWindow implements OnInit,\r\n    AfterViewInit, OnDestroy {\r\n  private _elWithFocus: Element;  // element that is focused prior to modal opening\r\n\r\n   backdrop: boolean | string = true;\r\n   keyboard = true;\r\n   size: string;\r\n   windowClass: string;\r\n\r\n   dismissEvent = new EventEmitter();\r\n\r\n  constructor(private _elRef: ElementRef, private _renderer: Renderer2) {}\r\n\r\n  backdropClick($event): void {\r\n    if (this.backdrop === true && this._elRef.nativeElement === $event.target) {\r\n      this.dismiss(ModalDismissReasons.BACKDROP_CLICK);\r\n    }\r\n  }\r\n\r\n  escKey($event): void {\r\n    if (this.keyboard && !$event.defaultPrevented) {\r\n      this.dismiss(ModalDismissReasons.ESC);\r\n    }\r\n  }\r\n\r\n  dismiss(reason): void { this.dismissEvent.emit(reason); }\r\n\r\n  ngOnInit() {\r\n    this._elWithFocus = document.activeElement;\r\n    this._renderer.addClass(document.body, 'modal-open');\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (!this._elRef.nativeElement.contains(document.activeElement)) {\r\n      this._elRef.nativeElement['focus'].apply(this._elRef.nativeElement, []);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    const body = document.body;\r\n    const elWithFocus = this._elWithFocus;\r\n\r\n    let elementToFocus;\r\n    if (elWithFocus && elWithFocus['focus'] && body.contains(elWithFocus)) {\r\n      elementToFocus = elWithFocus;\r\n    } else {\r\n      elementToFocus = body;\r\n    }\r\n    elementToFocus['focus'].apply(elementToFocus, []);\r\n\r\n    this._elWithFocus = null;\r\n    this._renderer.removeClass(body, 'modal-open');\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'ngb-modal-window',\r\n  host: {\r\n    '[class]': '\"modal fade show\" + (windowClass ? \" \" + windowClass : \"\")',\r\n    'role': 'dialog',\r\n    'tabindex': '-1',\r\n    'style': 'display: block;',\r\n    '(keyup.esc)': 'escKey($event)',\r\n    '(click)': 'backdropClick($event)'\r\n  },\r\n  template: `\r\n    <div [class]=\"'modal-dialog' + (size ? ' modal-' + size : '')\" role=\"document\">\r\n        <div class=\"modal-content\"><ng-content></ng-content></div>\r\n    </div>\r\n    `\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'backdrop': [{ type: Input },],\n'keyboard': [{ type: Input },],\n'size': [{ type: Input },],\n'windowClass': [{ type: Input },],\n'dismissEvent': [{ type: Output, args: ['dismiss', ] },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}